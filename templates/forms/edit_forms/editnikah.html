{% extends "pages/base_page.html" %}
{% block title %}
Edit Your Nikah
{% endblock %}
{%block scripts%}
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
 // script which sends the form data to Flask route and waits for redirection or message
 $(document).ready(function () {
        $('#submit_form').click(function (e) {
            e.preventDefault();

            var formData = $('#EditNikahForm').serialize();

            $.ajax({
                type: 'POST',
                url: '/editnikahbooking',  
                data: formData,
                success: function (response) {
                    if (response.redirect_url) {
                        window.location.href = response.redirect_url;
                    } else {
                        alert(response.message);
                    }
                },
                error: function () {
                    alert('Error submitting form');
                }
            });
        });
    });
</script>
{%endblock%}
{% block content %}
        <h1>Editing Your Nikah </h1>
        {% for row in rows %}
        <form id="EditNikahForm" action="{{ url_for('routes.editnikahbooking') }}" method="POST">
            <input type="hidden" id="UserID" name="UserID" value="{{ row['UserID']}}"/>

            <input type="hidden" name="NikahID" value="{{ row['NikahID'] }}"/>

            <input type="hidden" name="email" value="{{ row['Email'] }}"/><br>

            <br>First Name: <input type="text" id="first_name" name="first_name" value="{{row['FirstName']}}"/><br>

            <br>Last Name: <input type="text" name="last_name" value="{{ row['LastName'] }}"/><br>

            <br>Phone Number: <input type="text" name="phone_number" value="{{ row['PhoneNumber'] }}"/><br>

            <br>Date of Birth: <input type="date" name="date_of_birth" min="1950-01-01" max="2005-01-01" value="{{ row['DoB'] }}"/><br>

            <br>Groom First Name: <input type="text" name="groom_first_name" value="{{ row['GroomFirstName'] }}"/><br>
            
            <br>Groom Last Name: <input type="text" name="groom_last_name" value="{{ row['GroomLastName'] }}"/><br>

            <br>Bride First Name: <input type="text" name="bride_first_name" value="{{ row['BrideFirstName'] }}"/><br>

            <br>Bride Last Name: <input type="text" name="bride_last_name" value="{{ row['BrideLastName'] }}"/><br>

            <br>Address Line: <input type="text" name="address_line" value="{{ row['AddressLine'] }}"/><br>

            <br>Post Code: <input type="text" name="post_code" value="{{ row['PostCode'] }}"/><br>

            <br>Time: <input type="time" name="time" step= "900" min="16:00:00" max="19:30:00" value="{{ row['Time'] }}"/><br>

            <br>Date: <input type="date" name="date" min="2025-01-02" max="2030-12-31" value="{{ row['Date'] }}"/><br>

            <br><input id="submit_form" type="submit" value="Submit" /><br>
        </form>
        {% endfor %}
{% endblock %}